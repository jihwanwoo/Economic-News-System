# 🤖 통합 경제 뉴스 시스템 대시보드 가이드

## 📋 개요

통합 경제 뉴스 시스템은 **데이터 모니터링**, **이벤트 감지**, **Slack 알림**, **AI 기사 생성**을 하나의 Streamlit 대시보드에서 관리할 수 있는 통합 솔루션입니다.

## 🚀 빠른 시작

### 1. 시스템 테스트
```bash
# 모든 구성 요소 테스트
python test_integrated_dashboard.py
```

### 2. 대시보드 실행
```bash
# 방법 1: 셸 스크립트 사용 (권장)
./start_integrated_system.sh

# 방법 2: Python 스크립트 직접 실행
python run_integrated_dashboard.py

# 방법 3: Streamlit 직접 실행
streamlit run integrated_dashboard.py
```

### 3. 브라우저 접속
- 로컬: http://localhost:8501
- 원격 서버: http://[서버IP]:8501

## 🎛️ 대시보드 구성

### 📊 실시간 모니터링 탭
- **주요 지수 현황**: S&P 500, NASDAQ, VIX, 달러 인덱스
- **실시간 차트**: 주가 추이, 거래량, 변화율
- **이벤트 타임라인**: 감지된 이벤트의 시간별 분포

### 🚨 이벤트 감지 탭
- **이벤트 통계**: 총 감지 이벤트, 긴급 이벤트, 처리된 이벤트
- **실시간 이벤트 목록**: 최근 감지된 이벤트 테이블
- **상세 정보**: 개별 이벤트의 세부 분석

### 📰 AI 기사 탭
- **기사 생성 현황**: 총 생성 기사, 품질 점수, 처리 시간
- **기사 목록**: 생성된 기사의 제목, 내용, 메타데이터
- **수동 기사 생성**: 테스트용 기사 생성 기능

### 📱 Slack 알림 탭
- **알림 설정**: 이벤트 감지, 기사 생성, 시간별 요약 알림
- **테스트 알림**: 시스템 상태, 이벤트 감지, 기사 생성 테스트
- **알림 로그**: 최근 전송된 알림 내역

## 🎛️ 사이드바 제어판

### 📊 모니터링 제어
- **🚀 모니터링 시작**: 실시간 데이터 수집 및 이벤트 감지 시작
- **⏹️ 모니터링 중지**: 모니터링 프로세스 중지
- **상태 표시**: 현재 모니터링 상태 (활성/비활성)

### ⚙️ 설정
- **모니터링 간격**: 10초~300초 (기본: 60초)
- **알림 임계값**: 1%~10% (기본: 3%)

### 📱 Slack 설정
- **웹훅 상태**: Slack 웹훅 URL 설정 확인
- **설정 가이드**: 미설정 시 안내 메시지

### ✍️ 수동 기사 생성
- **📝 테스트 기사 생성**: 샘플 이벤트 기반 기사 생성

## 🔧 주요 기능

### 1. 실시간 데이터 모니터링
- **데이터 소스**: Yahoo Finance API
- **모니터링 대상**: AAPL, GOOGL, MSFT, TSLA, NVDA, ^GSPC, ^IXIC, ^VIX
- **업데이트 주기**: 1분 (설정 가능)

### 2. 지능형 이벤트 감지
- **가격 변동**: 2% 이상 변화 시 이벤트 감지
- **거래량 급증**: 평균 대비 2배 이상 시 감지
- **VIX 특별 모니터링**: 25 이상 시 고변동성 경고
- **심각도 분류**: Low, Medium, High, Critical

### 3. 자동 기사 생성
- **트리거 조건**: 심각도 0.7 이상 이벤트
- **기사 구성**: 제목, 리드, 본문, 결론
- **품질 평가**: 1-10점 자동 채점
- **메타데이터**: 심볼, 이벤트 유형, 생성 시간

### 4. Slack 통합 알림
- **이벤트 알림**: 심각도 0.6 이상 이벤트 즉시 알림
- **기사 알림**: 새 기사 생성 완료 시 알림
- **시스템 상태**: 주기적 시스템 현황 리포트
- **Rich 메시지**: Slack Blocks API 활용한 구조화된 메시지

## 📊 이벤트 유형

### 가격 기반 이벤트
- **price_spike**: 3% 이상 급등
- **price_drop**: 3% 이상 급락
- **price_change**: 2-3% 변동

### 거래량 기반 이벤트
- **volume_spike**: 평균 대비 2배 이상 거래량

### 변동성 기반 이벤트
- **high_volatility**: VIX 25 이상

## 🔔 알림 설정

### 알림 유형
1. **이벤트 감지 알림**: 실시간 시장 이벤트
2. **기사 생성 알림**: AI 기사 완성 통지
3. **시스템 상태 알림**: 주기적 상태 리포트

### 알림 임계값
- **기본값**: 3% 가격 변동
- **조정 범위**: 1% ~ 10%
- **심각도 기준**: 0.6 이상 자동 알림

## 🛠️ 문제 해결

### 일반적인 문제

#### 1. 모니터링이 시작되지 않음
```bash
# 환경 변수 확인
python test_integrated_dashboard.py

# 로그 확인
tail -f logs/economic_news_$(date +%Y%m%d).log
```

#### 2. Slack 알림이 전송되지 않음
```bash
# 웹훅 URL 확인
echo $SLACK_WEBHOOK_URL

# 수동 테스트
curl -X POST -H 'Content-type: application/json' \
--data '{"text":"테스트"}' $SLACK_WEBHOOK_URL
```

#### 3. 데이터 수집 실패
- 인터넷 연결 확인
- Yahoo Finance API 상태 확인
- 방화벽 설정 확인

#### 4. 차트가 표시되지 않음
- Plotly 설치 확인: `pip install plotly`
- 브라우저 JavaScript 활성화 확인

### 로그 확인
```bash
# 실시간 로그 모니터링
tail -f logs/economic_news_$(date +%Y%m%d).log

# 오류 로그 검색
grep "ERROR" logs/economic_news_$(date +%Y%m%d).log
```

## 📈 성능 최적화

### 1. 모니터링 간격 조정
- **고빈도**: 10-30초 (높은 리소스 사용)
- **표준**: 60초 (권장)
- **저빈도**: 300초 (낮은 리소스 사용)

### 2. 메모리 관리
- 이벤트 히스토리: 최근 10개만 유지
- 기사 목록: 자동 정리 기능
- 차트 데이터: 캐싱 활용

### 3. 네트워크 최적화
- API 호출 제한 준수
- 실패 시 재시도 로직
- 타임아웃 설정

## 🔒 보안 고려사항

### 환경 변수 관리
```bash
# .env 파일 권한 설정
chmod 600 .env

# 민감한 정보 확인
grep -E "(KEY|TOKEN|SECRET)" .env
```

### Slack 웹훅 보안
- 웹훅 URL 외부 노출 금지
- 정기적인 웹훅 URL 갱신
- 알림 내용 민감 정보 필터링

## 📚 추가 리소스

### 관련 문서
- [SLACK_SETUP_GUIDE.md](SLACK_SETUP_GUIDE.md): Slack 설정 가이드
- [EXECUTION_GUIDE.md](EXECUTION_GUIDE.md): 전체 시스템 실행 가이드
- [README.md](README.md): 프로젝트 전체 개요

### 지원 및 문의
- GitHub Issues: 버그 리포트 및 기능 요청
- 로그 파일: 문제 진단을 위한 상세 정보
- 테스트 스크립트: 시스템 상태 자가 진단

---

## 🎉 성공적인 실행 예시

```bash
$ python test_integrated_dashboard.py
🤖 통합 대시보드 테스트 시작
==================================================
📦 모듈 import 테스트 중...
✅ Streamlit 로드 성공
✅ Pandas 로드 성공
✅ Plotly 로드 성공
✅ yfinance 로드 성공
✅ requests 로드 성공
✅ python-dotenv 로드 성공

⚙️ 환경 변수 테스트 중...
✅ SLACK_WEBHOOK_URL: 설정됨
✅ ALPHA_VANTAGE_API_KEY: 설정됨
✅ AWS_DEFAULT_REGION: 설정됨

📊 데이터 수집 테스트 중...
✅ AAPL 데이터 수집 성공: 78개 데이터포인트
   최신 가격: $213.25

📱 Slack 웹훅 테스트 중...
✅ Slack 웹훅 테스트 성공

==================================================
📋 테스트 결과 요약
==================================================
모듈 Import: ✅ 통과
환경 변수: ✅ 통과
데이터 수집: ✅ 통과
Slack 웹훅: ✅ 통과

총 4개 테스트 중 4개 통과

🎉 모든 테스트가 통과했습니다!
💡 다음 명령어로 통합 대시보드를 실행하세요:
   ./start_integrated_system.sh
```

이제 통합 대시보드가 완전히 준비되었습니다! 🚀
