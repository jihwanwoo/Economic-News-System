name: Test Economic News System

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        python-version: [3.8, 3.9, '3.10']
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v3
      with:
        python-version: ${{ matrix.python-version }}
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    - name: Run basic tests
      run: |
        python -c "import sys; print('Python version:', sys.version)"
        python -c "from agents.base_agent import BaseAgent; print('Base agent import successful')"
        python -c "from data_monitoring.technical_analysis import TechnicalAnalyzer; print('Technical analysis import successful')"
        python -c "from notifications.slack_notifier import SlackNotifier; print('Slack notifier import successful')"
    
    - name: Test system components
      run: |
        # AWS 자격증명 없이 실행 가능한 테스트들만
        python data_monitoring/technical_analysis.py || true
        python -c "from notifications.slack_notifier import SlackNotifier; n = SlackNotifier('dummy'); print('Slack notifier test passed')"
